<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>liminaal</title>
<meta name="description" content="Liminaal - eerie and aesthetic music gallery." />
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700&display=swap" rel="stylesheet">
<style>
  #screensaver {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000; /* Optional: set a background color */
            z-index: 9999; /* Ensure it appears on top */
            opacity: 0;
            transition: opacity 1s ease-in-out;
            pointer-events: none; /* Prevent interaction with the iframe by default */
        }
        #screensaver.show {
            opacity: 1;
            pointer-events: auto; /* Allow interaction with the screensaver iframe */
        }
        #iframe-ss {
            pointer-events: none; /* Prevent interaction with the iframe by default */
        }
:root{
  --bg:#050505; --fg:#f5f5f5; --muted:rgba(245,245,245,0.12);
  --card-radius:12px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:'Unbounded',sans-serif}
.container{max-width:1100px;margin:0 auto;padding:80px 20px}
h1{text-align:center;margin:0 0 18px;font-size:3rem}
.spotify-player{display:flex;justify-content:center;margin:1.5rem 0}
iframe{border-radius:12px}

/* Loader (original style + animated dots) */
.loader {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #000;
  z-index: 99999;
  font-size: 1.25rem;
  letter-spacing: 2px;
  color: var(--fg);
  transition: opacity .6s ease, visibility .6s ease;
}
.loader-inner { display:flex; gap:8px; align-items:center; }
.loader .label { font-weight:700; text-transform:lowercase; }
.loader .dots { display:inline-block; width:36px; text-align:left; }
.loader .dots span { display:inline-block; width:6px; height:6px; margin-right:4px; border-radius:50%; background:var(--fg); opacity:.18; transform:translateY(0); animation: dot 1s infinite linear; }
.loader .dots span:nth-child(1){ animation-delay: 0s }
.loader .dots span:nth-child(2){ animation-delay: 0.12s }
.loader .dots span:nth-child(3){ animation-delay: 0.24s }

@keyframes dot {
  0% { opacity: .18; transform: translateY(0) scale(.9); }
  40% { opacity: 1; transform: translateY(-6px) scale(1.05); }
  80% { opacity: .18; transform: translateY(0) scale(.95); }
}

/* Hide when loaded */
.loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

/* Grid */
.image-placeholder{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:2.5rem}

/* Tile */
.image-box{position:relative;height:260px;border-radius:var(--card-radius);overflow:hidden;cursor:pointer;
  box-shadow:0 8px 30px rgba(0,0,0,0.6), inset 0 -20px 40px rgba(0,0,0,0.4);
  transition:transform .45s cubic-bezier(.2,.9,.2,1),box-shadow .45s}
.image-box img.thumb{width:100%;height:100%;object-fit:cover;display:block;
  filter:none;
  transition:transform .8s ease,filter .45s}
.image-box::before{content:"";position:absolute;inset:0;z-index:1;pointer-events:none;
  background:radial-gradient(ellipse at 30% 20%, rgba(60,100,80,0.03) 0%, transparent 30%),
             linear-gradient(180deg,rgba(0,0,0,0.18) 10%, rgba(0,0,0,0.45) 70%);mix-blend-mode:multiply}
.image-box::after{content:"";position:absolute;inset:0;z-index:3;pointer-events:none;
  background-image:linear-gradient(transparent 80%, rgba(0,0,0,0.06) 100%), repeating-linear-gradient(90deg, rgba(255,255,255,0.02) 0 1px, transparent 1px 4px);
  opacity:.7;mix-blend-mode:overlay;transition:opacity .5s}
.image-box .meta{position:absolute;left:0;right:0;bottom:0;padding:12px 14px;z-index:5;
  display:flex;justify-content:space-between;align-items:center;background:linear-gradient(180deg,rgba(0,0,0,0),rgba(0,0,0,0.6));transform:translateY(6px);
  transition:transform .36s}
.image-box .meta .title{font-weight:700;font-size:1.02rem}
.image-box .meta .sub{font-size:.78rem;opacity:.75}
.image-box:hover{transform:scale(1.04) rotateX(3deg) rotateY(-2deg)}
.image-box:hover img.thumb{transform:scale(1.08) translateY(-6px);filter:none}
.image-box:hover .meta{transform:translateY(0)}

/* Hover preview (floating) for gallery items only */
.hover-preview{
  position:fixed;pointer-events:none;z-index:12000;display:flex;gap:12px;align-items:flex-start;
  transform:translate3d(12px,12px,0) scale(.98);transition:opacity .12s linear,transform .12s linear;
  opacity:0;visibility:hidden;max-width:420px;
  filter:drop-shadow(0 10px 40px rgba(0,0,0,0.7));
}
.hover-preview.active{opacity:1;visibility:visible;transform:translate3d(12px,12px,0) scale(1)}
.hover-preview .preview-thumb{width:180px;height:120px;border-radius:10px;overflow:hidden;background:#000;flex-shrink:0}
.hover-preview .preview-thumb img{width:100%;height:100%;object-fit:cover;display:block;
  filter:none}
.hover-preview .preview-meta{background:linear-gradient(180deg,rgba(10,10,10,0.7),rgba(5,5,5,0.95));padding:10px;border-radius:8px;color:var(--fg);
  max-width:220px}
.hover-preview .preview-meta h4{margin:0 0 6px;font-size:1rem}
.hover-preview .preview-meta p{margin:0;font-size:.85rem;color:rgba(245,245,245,.85);opacity:.95}

/* pointer nub */
.hover-preview::after{content:"";position:absolute;left:10px;top:100%;width:10px;height:10px;background:transparent;filter:blur(.5px)}

/* Popup modal (gallery) */
.popup{position:fixed;inset:0;background:rgba(0,0,0,.92);display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:opacity .3s;z-index:10000}
.popup.active{opacity:1;pointer-events:auto}
.popup-inner{max-width:900px;width:calc(100% - 40px);margin:20px;border-radius:14px;overflow:hidden;box-shadow:0 20px 80px rgba(0,0,0,.8);transform:translateY(10px);transition:transform .24s}
.popup.active .popup-inner{transform:translateY(0)}
.popup-content{background:linear-gradient(180deg,rgba(20,20,20,.97),rgba(8,8,8,.99));padding:18px;text-align:center;color:var(--fg)}
.popup-content img{width:100%;height:auto;max-height:70vh;object-fit:contain;filter:none}
.popup-close{position:absolute;top:18px;right:20px;background:rgba(255,255,255,.03);border:none;color:var(--fg);padding:8px 10px;border-radius:8px;cursor:pointer}

/* Collaborators section — more space between gallery and collabs */
.collab-wrap{margin-top:4rem} /* increased spacing */
.collab-head{display:flex;justify-content:center;align-items:center;gap:12px;margin:28px 0 8px}
.collab-head h2{margin:0;font-size:1.6rem}
.collaborators{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center}
.collaborator{
  width:160px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px;padding:12px;display:flex;flex-direction:column;align-items:center;cursor:pointer;
  box-shadow:0 8px 30px rgba(0,0,0,0.6);transition:transform .28s ease,box-shadow .28s ease,opacity .28s;
  opacity:0; transform:translateY(8px) scale(.98);
}
.collaborator.visible{opacity:1;transform:translateY(0) scale(1)}
.collaborator:hover{transform:translateY(-6px) scale(1.04); box-shadow:0 20px 50px rgba(0,0,0,0.75)}
.collaborator img{width:100px;height:100px;object-fit:cover;border-radius:6px;margin-bottom:5px;border:0;background:transparent}
.collaborator .name{font-weight:700;font-size:1rem;margin-bottom:4px}
.collaborator .role{font-size:.78rem;opacity:.7}

/* Collaborator popup (image left, text right) */
.popup-collab{position:fixed;inset:0;background:rgba(0,0,0,.92);display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:opacity .3s;z-index:10001}
.popup-collab.active{opacity:1;pointer-events:auto}
.popup-collab .popup-inner{max-width:920px;width:calc(100% - 40px);margin:20px;border-radius:14px;overflow:hidden;box-shadow:0 20px 80px rgba(0,0,0,.8);transform:translateY(10px);transition:transform .24s;background:linear-gradient(180deg,rgba(20,20,20,.97),rgba(8,8,8,.99));display:flex;gap:0}
.popup-collab.active .popup-inner{transform:translateY(0)}
.popup-collab .collab-left{flex: 0 0 50%;min-width:220px;max-height:70vh;overflow:hidden;display:flex;align-items:center;justify-content:center;background:transparent}
.popup-collab .collab-left img{width:100%;height:100%;object-fit:cover;display:block;background:transparent}
.popup-collab .collab-right{flex:1;padding:20px 22px;color:var(--fg);display:flex;flex-direction:column;justify-content:center;gap:8px}
.popup-collab .collab-right h3{margin:0;font-size:1.4rem}
.popup-collab .collab-right p{margin:0;opacity:.92;line-height:1.45}
.popup-collab .popup-close{position:absolute;top:18px;right:20px;background:rgba(255,255,255,.03);border:none;color:var(--fg);padding:8px 10px;border-radius:8px;cursor:pointer;z-index:10002}

/* small responsive adjustments */
@media (max-width:900px){
  .popup-collab .popup-inner{flex-direction:column}
  .popup-collab .collab-left{flex-basis:auto;height:45vw;max-height:55vh}
}
@media (max-width:700px){.image-box{height:200px}.hover-preview{display:none}.collaborators{gap:.6rem}.collaborator{width:46%;min-width:140px} }
</style>
</head>
<body>
<!-- Loader -->
<div class="loader" id="siteLoader" role="status" aria-hidden="false">
  <div class="loader-inner">
    <div class="label">liminaalizing</div>
    <div class="dots" aria-hidden="true">
      <span></span><span></span><span></span>
    </div>
  </div>
</div>

<div class="container" id="siteContent" aria-hidden="true">
  <div id="screensaver">
        <iframe id="iframe-ss" src="https://byte-piixel.github.io/tools/screensaver" width="100%" height="100%" frameborder="0"></iframe>
    </div>
  <h1>liminaal</h1>
  <div class="spotify-player">
    <iframe src="https://open.spotify.com/embed/playlist/5xzeVvVZU6mCfSwALg1yNp?utm_source=generator" width="100%" height="152" frameborder="0" allowfullscreen allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
  </div>

  <div class="image-placeholder">
    <div class="image-box" data-title="Abandoned Hospital" data-desc="Abandoned hospital found..." data-img="/assets/images/hospital.png">
      <img class="thumb" src="/assets/images/hospital.png" alt="Abandoned Hospital" loading="lazy" decoding="async">
      <div class="meta"><div class="title">Abandoned Hospital</div><div class="sub">found - november 2025</div></div>
    </div>

    <div class="image-box" data-title="Cold Loneliness" data-desc="Cold halls and colder hearts." data-img="/assets/images/cold-loneliness.jpg">
      <img class="thumb" src="/assets/images/cold-loneliness.jpg" alt="Cold Loneliness" loading="lazy" decoding="async">
      <div class="meta"><div class="title">Cold Loneliness</div><div class="sub">somewhere inside</div></div>
    </div>

    <div class="image-box" data-title="Oppressive Cells" data-desc="Cells full of silence." data-img="/assets/images/oppressive-cells.jpg">
      <img class="thumb" src="/assets/images/oppressive-cells.jpg" alt="Oppressive Cells" loading="lazy" decoding="async">
      <div class="meta"><div class="title">Oppressive Cells</div><div class="sub">locked memories</div></div>
    </div>
  </div>

  <!-- Collaborators Section -->
  <div class="collab-wrap">
    <div class="collab-head">
      <h2>Collaborators</h2>
    </div>
    <div class="collaborators" id="collaborators">
      <!-- Kaido -->
      <div class="collaborator"
           data-coll-img="/assets/mii/Kaido head.png"
           data-coll-img-full="/assets/mii/Kaido full.png"
           data-coll-desc="Kaido — visual & textures contributor.">
        <img src="/assets/mii/Kaido head.png" alt="Kaido">
        <div class="name">Kaido</div>
        <div class="role"></div>
      </div>

      <!-- Awitax -->
      <div class="collaborator"
           data-coll-img="/assets/mii/Awitax head.png"
           data-coll-img-full="/assets/mii/Awitax full.png"
           data-coll-desc="Awitax — audio & arrangement.">
        <img src="/assets/mii/Awitax head.png" alt="Awitax">
        <div class="name">Awitax</div>
        <div class="role"></div>
      </div>

      <!-- Add more collaborators by copying this block and updating data attributes -->
      <!--
      <div class="collaborator"
           data-coll-img="/assets/mii/NAME head.png"
           data-coll-img-full="/assets/mii/NAME full.png"
           data-coll-desc="NAME — role.">
        <img src="/assets/mii/NAME head.png" alt="NAME">
        <div class="name">NAME</div>
        <div class="role"></div>
      </div>
      -->
    </div>
  </div>
</div>

<!-- hover preview element (gallery only) -->
<div class="hover-preview" id="hoverPreview" aria-hidden="true">
  <div class="preview-thumb"><img id="previewThumb" src="" alt=""></div>
  <div class="preview-meta">
    <h4 id="previewTitle"></h4>
    <p id="previewDesc"></p>
  </div>
</div>

<!-- Popup Modal (gallery only) -->
<div class="popup" id="popup" aria-hidden="true">
  <div class="popup-inner" role="dialog" aria-modal="true" aria-labelledby="popup-title">
    <button class="popup-close" id="popup-close" aria-label="Close">✕</button>
    <div class="popup-content">
      <div class="imgwrap"><img src="" alt="Popup Image" id="popup-img"></div>
      <h3 id="popup-title"></h3>
      <p id="popup-desc"></p>
    </div>
  </div>
</div>

<!-- Collaborator Popup Modal (image left, text right) -->
<div class="popup-collab" id="popup-collab" aria-hidden="true">
  <div class="popup-inner" role="dialog" aria-modal="true" aria-labelledby="popup-collab-title">
    <button class="popup-close" id="popup-collab-close" aria-label="Close">✕</button>
    <div class="collab-left">
      <img id="popup-collab-img" src="" alt="Collaborator image">
    </div>
    <div class="collab-right">
      <h3 id="popup-collab-title"></h3>
      <p id="popup-collab-desc"></p>
    </div>
  </div>
</div>

<footer style="text-align:center;padding:2rem 0;color:rgba(245,245,245,.6)">&copy; liminaal</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const loader = document.getElementById('siteLoader');
  const siteContent = document.getElementById('siteContent');

  // Keep loader visible until everything is loaded.
  // When window 'load' fires, hide loader and reveal content.
  function hideLoader() {
    loader.classList.add('hidden');
    loader.setAttribute('aria-hidden','true');
    siteContent.setAttribute('aria-hidden','false');
  }
  // If the page already loaded before this script, hide immediately
  if (document.readyState === 'complete') {
    // small delay so user sees loader briefly
    setTimeout(hideLoader, 120);
  } else {
    window.addEventListener('load', () => {
      // wait a touch for smoothness, then hide
      setTimeout(hideLoader, 160);
    });
  }

  // Helper: prefer high-res variant (filename@2x.ext) if available
  function highResPath(path){
    if(!path) return path;
    const parts = path.split('.');
    if(parts.length < 2) return path;
    const ext = parts.pop();
    const base = parts.join('.');
    return base + '@2x.' + ext;
  }

  // Gallery interactions (hover preview + popup)
  const boxes = document.querySelectorAll('.image-box');
  const hoverPreview = document.getElementById('hoverPreview');
  const previewThumb = document.getElementById('previewThumb');
  const previewTitle = document.getElementById('previewTitle');
  const previewDesc = document.getElementById('previewDesc');

  const popup = document.getElementById('popup');
  const popupImg = document.getElementById('popup-img');
  const popupTitle = document.getElementById('popup-title');
  const popupDesc = document.getElementById('popup-desc');
  const popupClose = document.getElementById('popup-close');

  boxes.forEach(box => {
    let showTimer = null;

    function positionPreview(x, y){
      const pad = 12;
      const rect = hoverPreview.getBoundingClientRect();
      let left = x + 18;
      let top = y + 18;
      if(left + rect.width + pad > window.innerWidth) left = x - rect.width - 18;
      if(top + rect.height + pad > window.innerHeight) top = y - rect.height - 18;
      hoverPreview.style.transform = `translate3d(${left}px, ${top}px, 0) scale(1)`;
    }

    box.addEventListener('mouseenter', e => {
      showTimer = setTimeout(() => {
        const imgPath = box.dataset.img || box.querySelector('img.thumb')?.src || '';
        const candidate = highResPath(imgPath);
        previewThumb.src = candidate;
        previewThumb.onerror = () => { previewThumb.onerror = null; previewThumb.src = imgPath; };
        previewTitle.textContent = box.dataset.title || '';
        previewDesc.textContent = box.dataset.desc || '';
        hoverPreview.classList.add('active');
        hoverPreview.setAttribute('aria-hidden','false');
        positionPreview(e.clientX, e.clientY);
      }, 110);
    });

    box.addEventListener('mousemove', e => {
      if(hoverPreview.classList.contains('active')){
        positionPreview(e.clientX, e.clientY);
      }
    });

    box.addEventListener('mouseleave', () => {
      clearTimeout(showTimer);
      hoverPreview.classList.remove('active');
      hoverPreview.setAttribute('aria-hidden','true');
    });

    box.addEventListener('click', () => {
      const imgPath = box.dataset.img || box.querySelector('img.thumb')?.src || '';
      const candidate = highResPath(imgPath);
      popupImg.src = candidate;
      popupImg.onerror = () => { popupImg.onerror = null; popupImg.src = imgPath; };
      popupTitle.textContent = box.dataset.title || '';
      popupDesc.textContent = box.dataset.desc || '';
      popup.classList.add('active');
      popup.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    });
  });

  function closePopup(){
    popup.classList.remove('active');
    popup.setAttribute('aria-hidden','true');
    popupImg.src = '';
    document.body.style.overflow = '';
  }
  popup.addEventListener('click', e => { if(e.target === popup) closePopup(); });
  popupClose.addEventListener('click', closePopup);
  document.addEventListener('keydown', e => { if(e.key === 'Escape' && popup.classList.contains('active')) closePopup(); });

  function isTouch(){
    return ( 'ontouchstart' in window ) || navigator.maxTouchPoints > 0;
  }
  if(isTouch()){
    hoverPreview.style.display = 'none';
  }

  // Collaborator cards entrance + click -> collaborator popup
  const collaborators = document.querySelectorAll('.collaborator');
  const popupCollab = document.getElementById('popup-collab');
  const popupCollabImg = document.getElementById('popup-collab-img');
  const popupCollabTitle = document.getElementById('popup-collab-title');
  const popupCollabDesc = document.getElementById('popup-collab-desc');
  const popupCollabClose = document.getElementById('popup-collab-close');

  collaborators.forEach((coll, idx) => {
    // staggered entrance
    setTimeout(()=> coll.classList.add('visible'), 80 * idx + 120);

    coll.addEventListener('click', () => {
      // prefer full PNG if provided
      // support attributes both data-coll-img-full and camelCase dataset
      const fullAttr = coll.getAttribute('data-coll-img-full') || coll.dataset.collImgFull || '';
      const headAttr = coll.getAttribute('data-coll-img') || coll.dataset.collImg || '';
      const tileImg = coll.querySelector('img')?.src || '';
      // choose full if exists, else head, else tile
      let chosen = fullAttr || headAttr || tileImg || '';

      // try high-res variant first
      const candidate = highResPath(chosen);
      popupCollabImg.src = candidate;
      // if error, fallback to chosen (which may already be the fallback)
      popupCollabImg.onerror = () => { popupCollabImg.onerror = null; popupCollabImg.src = chosen; };

      const name = coll.querySelector('.name')?.textContent || '';
      popupCollabTitle.textContent = name;
      popupCollabDesc.textContent = coll.getAttribute('data-coll-desc') || coll.dataset.collDesc || '';

      popupCollab.classList.add('active');
      popupCollab.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    });
  });

  function closeCollabPopup(){
    popupCollab.classList.remove('active');
    popupCollab.setAttribute('aria-hidden','true');
    popupCollabImg.src = '';
    document.body.style.overflow = '';
  }
  // click outside to close
  popupCollab.addEventListener('click', e => { if(e.target === popupCollab) closeCollabPopup(); });
  popupCollabClose.addEventListener('click', closeCollabPopup);
  // ESC closes collab popup too
  document.addEventListener('keydown', e => { if(e.key === 'Escape' && popupCollab.classList.contains('active')) closeCollabPopup(); });

});
</script>
  <script>
    let idleTimer;
    function resetTimer() {
        clearTimeout(idleTimer);
        const screensaver = document.getElementById('screensaver');
        screensaver.classList.remove('show');
        screensaver.classList.add('hide'); // Smooth disappearing animation

        idleTimer = setTimeout(() => {
            screensaver.classList.remove('hide');
            screensaver.classList.add('show'); // Smooth appearing animation
        }, 60000); // 5 minutes
    }

    document.addEventListener('mousemove', resetTimer);
    document.addEventListener('keypress', resetTimer);
    resetTimer(); // Start the timer on page load
</script>
</body>
</html>
